# 2. Search
空搜索,搜索全部：GET /_search
分页：from默认0 size默认10

es全文搜索基于建立的倒排索引，
es会对文档进行分析，建立倒排索引，建里索引的字段类型可以是：
- 字符串 String
- 整数 byte short integer long
- 浮点数 float double
- 布尔 boolean
- 日期 date

当未指定数据类型时，es会根据JSON中的基本类型转换  
es会用数组的第一个值的数据类型  
null和空数组不会被索引   
内部对象数组会被扁平化处理，需要准确查询需要使用到嵌套对象

## 2.1 查询表达式

评分查询query需要找到匹配的文档，并计算匹配度，  
过滤查询filters只用找到匹配的文档，一版情况性能更好

- match   
    如果在一个精确值的字段使用，则是精确查询，如果是在全文字段查询，是全文查询，会对查询内容进行分析
- multi_match   
    在多个字段上执行的相同查询
- range
    - gt >
    - lt <
    - gte >=
    - lte <=
- term  
    精确值匹配，对输入文本不分析
- exists  
    指定字段有值的文档 类似 not is_null()
- missing  
    指定字段无值的文档 类似is_null()
- bool 组合查询
    - must 必须满足
    - must_not 必须不满足
    - shold 如果满足任意一个，则增加相关性得分_score
    - filter 必须满足，不以评分过滤模式进行，对评分没有贡献
- constant_score
    - 将不变的常量评分应用于所有匹配的文档，通常用于只有一个filter的bool查询
- sort 排序 按字段排序不计算评分
    - order: desc, asc
    - mode: min, max, avg, sum多字段值可以计算后排序