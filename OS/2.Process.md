# 2. 进程的描述与控制
## 2.1 前驱图和程序执行
前驱图：有向无循环图。Directed acyclic graph  
用于描述进程之间的先后顺序。  
初始结点Initial Node: 没有前驱的结点。  
终止结点Final Node: 没有后继的结点。  
每个结点的重量Weight：表示结点含有的程序量或程序的执行时间。  

### 程序顺序执行
一个应用程序由若干程序段组成，按照某种先后顺序执行。  
程序顺序执行时的特征：  
1. 顺序性
2. 封闭性，独占全机资源。
3. 可再现性。

### 程序并发执行
不存在前驱关系的程序可以并发执行。  
并发执行特点：  
1. 间断性。并发执行的程序间存在相互制约的关系，存在“执行-暂停-执行”的间断性活动规律
2. 失去封闭性。系统各种资源共享，
3. 不可再现性。由于失去了封闭性，计算结果与并发程序的执行速度有关。

## 2.2 进程的描述
### 进程的定义
进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位。  
进程实体（进程映像）：由程序段，相关的数据段，和PCB（进程控制块）组成。  
PCB进程控制块Process control block: 为使并发程序能够独立运行，操作系统给进程分配的专门的数据结构。系统利用PCB描述进程的基本情况和活动过程，进而进行控制和管理进程。

### 进程的特征
1. 动态性。进程的实质是进程实体的执行过程，是动态的过程。
2. 并发性。多个进程实体共同存在于内存中，在一段时间内同时运行。
3. 独立性。进程实体是一个能独立运行，独立获得资源和独立接受调度的基本单位。
4. 异步性。进程是按照异步的方式运行的。按照各自的独立的，不可预知的速度推进。（为实现并发执行结果可再现，配置相应的进程同步机制）

### 进程的基本状态及转换
三种基本状态：
1. 就绪Ready：分配到除了CPU以外的其他所有必要资源
2. 执行Running：获得CPU，程序正在执行的状态
3. 阻塞Block：由于发生某事件暂时无法继续执行的状态

创建状态：创建一个进程的过程。引入创建状态是为了保证进程的调度必须在创建工作结束后进行。  
终止状态：进程的终止：等待操作系统进行最后的善后处理，最后将PCB清零，PCB空间返还系统。
### 挂起操作和进程状态的转换
挂起操作：方便系统和用户观察和分析进程的需要。  
当进程被挂起后，意味着改进程处于静止状态，如果进程正在执行，则暂停执行，如果原本处于就绪状态，则该进程暂时不接受调度。

1. 挂起操作的引入：
    - 终端用户的需要，程序测试
    - 父进程请求，父进程挂起某个子进程，以便考察和修改该进程或协调各子进程
    - 负荷调节，系统挂起一些不重要的进程，保证系统能够正常运行
    - 操作系统的需要，操作系统检查运行中资源使用情况或进行记账
2. 进程状态转换
    - 活动就绪Readya -> 静止就绪Readys: 进程不再被调度执行
    - 活动阻塞Blocka -> 静止阻塞Blocks: 在进程期望的事件发生时，静止阻塞->活动阻塞
    - 静止就绪 -> 活动就绪：激活后
    - 禁止阻塞 -> 活动阻塞

### 进程管理中的数据结构
进程表又称为进程控制块PCB  

进程控制块PCB作为进程实体的一部分，记录了操作系统所需的，用于描述进程的当前情况以及管理进程运行的全部信息，是操作系统最重要的记录型数据就够。  

PCB的作用是使一个在多道程序环境下不能独立运行的程序成为一个能够独立运行的基本单位，一个能与其他进程并发执行的进程。  

- 作为独立运行的基本单位的标志
- 能实现间断性运行方式
- 提供进程管理所需要的信息
- 提供进程调度所需要的信息
- 实现与其他进程的同步和通信

进程块中的信息：
1. 进程标识符
    - 外部标识符：创建者提供
    - 内部标识符：OS提供，唯一的数字标识符
2. 处理机状态
    - 由处理机的各种寄存器中的内容组成
    - 1.通用寄存器，2.指令寄存器，3.程序状态字PSW，4.用户栈指针
3. 进程调度信息
    - 进程状态
    - 进程优先级
    - 进程雕塑所需要的的其他信息，等待时间总和，已执行时间总和
    - 事件，阻塞的原因
4. 进程控制信息
    - 程序和数据的地址
    - 进程同步和通信机制
    - 资料清单
    - 链接指针，所在队列下一个PCB的首地址

进程控制块的组织方式
1. 线性方式
2. 链接方式
3. 索引方式

## 2.3 进程控制
### 2.3.1 操作系统内核
OS内核：紧靠硬件的软件层次中的模块，如与硬件紧密相关的模块（中断处理程序），各种常用设备的驱动程序以及运行频率较高的模块（时钟管理，进程调度，许多模块共用的基本模块)。  
OS内核主要包含以下两大方面的功能：
1. 支撑功能
- 中断处理
- 时钟管理
- 原语操作
2. 资源管理功能
- 进程管理
- 存储器管理
- 设备管理
### 2.3.2 进程创建
#### 1. 进程的层次结构
父进程可以创建子进程。
子进程可以继承父进程所拥有的资源。

UNIX系统有进程层次结构。
Windows所有的进程都有相同的地位，只要知道进程的句柄，就可以控制进程，句柄是可以传递的。

#### 2. 进程图
进程图Process Graph是描述进程间的关系的一个有向树。  
父进程：Parent Process  
子进程：Progeny Process
#### 3. yingqi chuanjia
### 2.3.3 进程终止

### 2.3.4 进程的阻塞与唤醒

### 2.3.5 进程的挂起与激活 
## 2.4 进程同步

## 2.5 经典进程同步问题

## 2.6 进程通信

## 2.7 线程
线程是为了使过个程序能够实现并发执行，同时将又尽量减少系统的开销。    
不把作为调度和分派的基本单位也同时只作为拥有资源单位，做到轻装上阵  
对于拥有资源的单位，减少频繁的切换。
## 2.8 线程的实现
