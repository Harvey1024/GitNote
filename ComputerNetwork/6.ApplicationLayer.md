# 6. 应用层
## 6.1 域名系统DNS
## 6.2 文件传送协议FTP
## 6.3 远程终端协议
## 6.4 万维网
## 6.5 电子邮件
## 6.6 动态主机配置协议
## 6.7 简单网络管理协议
## 6.8 应用进程跨越网络的协议
API：Application programming interface 应用编程接口。
API提供了标准的系统调用函数，应用程序只需要使用这些函数就可以得到系统服务。
TCP/IP协议软件已驻留在操作系统中，Socket interface 套接字就是可以让应用程序使用TCP/IP的应用编程接口API。

应用程序使用网络进行通信流程：  
1. 进程发出socket系统调用请求
2. 系统分配给进程一些必要的系统资源（资源的总和称为socket descriptor套接字描述符）
3. 进程使用socket descriptor进行建立连接，收发数据，调整网络通信参数等操作
4. 通信完毕后通过socket的close系统调用通知系统回收资源。

系统调用：
1. 连接建立阶段
    - 创建socket后，将本地IP地址和熟知端口号bind到socket上，
    - 调用listen, 以便随时接受客户服务请求
    - 调用accept，将客户发来的连接请求提取出来。
    - 主服务器进程调用accept后，为每个新的连接请求创建一个新的socket，并将socket的标识符返回给客户，并创建一个从属服务进程来处理这个socket, 数据通信结束后，从属服务进程关闭这个socket，同时这个从属服务进程也被撤销。
    - 客户服务调用socket创建套接字后，调用connect与远地服务器建立连接
2. 数据传送阶段
    - 客户和服务器都使用send传送数据。send需要三个变量：要发往的socket的描述符，要发送的数据地址和，数据长度。
    - 都使用recv接收数据：需要三个变量：要使用的socket的描述符，缓存的地址，缓存空间的长度。
3. 连接释放阶段
    - 调用close释放连接和撤销socket
![picture 1](img/1599049058324.png)  

## 6.9 P2P应用
